<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" th:href="@{/css/search.css}">
  <title>History Suggest</title>
  <script>
    function updateTableHeaders() {
      const dateInput = document.getElementById('date');
      const selectedDate = new Date(dateInput.value);
      const year = selectedDate.getFullYear();
      const month = selectedDate.getMonth();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      const tableHeaders = document.querySelectorAll('table thead tr th:nth-child(n+5)'); // Chọn từ th thứ 5 trở đi

      // Bắt đầu cập nhật các thẻ th cho số ngày trong tháng
      tableHeaders.forEach((header, index) => {
        if (index < daysInMonth) {
          header.style.display = ''; // Hiển thị th cho các ngày hợp lệ
          header.textContent = index + 1; // Đặt số thứ tự chính xác của ngày (bắt đầu từ 1)
        } else {
          header.style.display = 'none'; // Ẩn các thẻ th vượt quá số ngày trong tháng
        }
      });
    }


    window.addEventListener('DOMContentLoaded', () => {
      const dateInput = document.getElementById('date');
      dateInput.addEventListener('change', updateTableHeaders);
      updateTableHeaders();
    });
  </script>
</head>
<body>
<div class="container">
  <div class="header">
    <div>
      <label for="date">Date:</label>
      <input type="month" id="date" name="date" value="2024-10">
    </div>
    <div>
      <a href="/search/detail" class="switching-btn">Display Switching</a>
      <a href="/search/new" class="add-btn">+ Add New</a>
    </div>
  </div>

  <table>
    <thead>
    <tr>
      <th>SEARCH KEYWORDS</th>
      <th>DISPLAY KEYWORDS</th>
      <th>PLATFORM</th>
      <th>MATCH PATTERN</th>
      <th th:each="day : ${#numbers.sequence(1, 31)}" th:text="${day}">Day</th>
    </tr>
    </thead>
    <tbody>
      <tr th:each="result : ${results}">
        <td th:text="${result.searchKeyword}"></td>
        <td th:text="${result.displayKeyword}"></td>
        <td th:text="${result.platform}"></td>
        <td th:text="${result.matchPattern}"></td>
      </tr>
    </tbody>
  </table>
</div>
</body>
</html>

